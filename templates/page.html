{% extends "base.html"%}

{% block seo -%}
  {{ super() }}

  {%- set og_title = page.title -%}

  {% if config.title and page.title -%}
    {% set title = page.title ~ " | " ~ config.title -%}
  {% elif page.title -%}
    {% set title = page.title -%}
  {% elif config.title -%}
    {% set title = config.title -%}
  {% else -%}
    {% set title = "" -%}
  {% endif -%}

  {% if page.description -%}
    {% set description = page.description -%}
  {% endif -%}

  {% if page.extra.image -%}
    {% set image = page.extra.image -%}
  {% endif -%}

  {% if page.extra.image_height -%}
    {% set image_height = page.extra.image_height -%}
  {% endif -%}

  {% if page.extra.image_width -%}
    {% set image_width = page.extra.image_width -%}
  {% endif -%}

  {% set web_type = "BlogPosting" -%}
  
  {{ macros::seo(title=title, og_title=og_title, description=description, site_url=site_url, image=image, image_height=image_height, image_width=image_width, web_type=web_type) }}
  
  <!-- Preload blog post hero image if available -->
  {% if page.extra.static_thumbnail %}
  <link rel="preload" as="image" href="{{ get_url(path=page.extra.static_thumbnail) | safe }}" fetchpriority="high">
  {% endif %}
{%- endblock seo %}

{% block content %}
  <article class="post">
    <small class="post-meta">
      <time datetime="{{ page.date }}">
        <span class="day">
          <svg width="12" height="12" aria-hidden="true"><use href="{{ get_url(path='sprite.svg') | safe }}#icon-calendar"></use></svg>
          <span>{{ page.date | date(format="%B %e, %Y") }}</span>
        </span>
        <span class="reading">
          <svg width="12" height="12" aria-hidden="true"><use href="{{ get_url(path='sprite.svg') | safe }}#icon-clock"></use></svg>
            <span>{{ page.reading_time }} mins</span>
          </span>
      </time>
      <span class="found-typo">
        {% set url = config.extra.repo_content_url ~ page.relative_path %}
        <svg width="12" height="12" aria-hidden="true"><use href="{{ get_url(path='sprite.svg') | safe }}#icon-edit"></use></svg> Found a typo? <a href="{{ url }}" target="_blank" aria-label="Edit this page on GitHub to submit a pull request" title="Edit on GitHub">Edit me</a>
      </span>
    </small>
    <h1 class="post-title">{{ page.title }}</h1>
    <h2 class="post-subtitle">{{ page.extra.subtitle }}</h2>
    {{ page.content | safe }}
  </article>
{% endblock content %}
